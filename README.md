# FinClipWeChatExtSDK-iOS

<p align="center">
    <a href="https://www.finclip.com?from=github">
    <img width="auto" src="https://www.finclip.com/mop/document/images/logo.png">
    </a>
</p>

<p align="center"> 
    <strong>FinClip Android DEMO</strong></br>
<p>
<p align="center"> 
        æœ¬é¡¹ç›®æä¾›åœ¨ Android ç¯å¢ƒä¸­æ¥å…¥å‡¡æ³°å®šåˆ¶çš„ç”¨äºæä¾›å°ç¨‹åºéƒ¨åˆ†å¾®ä¿¡SDKèƒ½åŠ›çš„ç¤ºä¾‹
<p>

<p align="center"> 
	ğŸ‘‰ <a href="https://www.finclip.com?from=github">https://www.finclip.com/</a> ğŸ‘ˆ
</p>

<div align="center">

<a href="#"><img src="https://img.shields.io/badge/%E4%B8%93%E5%B1%9E%E5%BC%80%E5%8F%91%E8%80%85-20000%2B-brightgreen"></a>
<a href="#"><img src="https://img.shields.io/badge/%E5%B7%B2%E4%B8%8A%E6%9E%B6%E5%B0%8F%E7%A8%8B%E5%BA%8F-6000%2B-blue"></a>
<a href="#"><img src="https://img.shields.io/badge/%E5%B7%B2%E9%9B%86%E6%88%90%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%94%E7%94%A8-75%2B-yellow"></a>
<a href="#"><img src="https://img.shields.io/badge/%E5%AE%9E%E9%99%85%E8%A6%86%E7%9B%96%E7%94%A8%E6%88%B7-2500%20%E4%B8%87%2B-orange"></a>

<a href="https://www.zhihu.com/org/finchat"><img src="https://img.shields.io/badge/FinClip--lightgrey?logo=zhihu&style=social"></a>
<a href="https://www.finclip.com/blog/"><img src="https://img.shields.io/badge/FinClip%20Blog--lightgrey?logo=ghost&style=social"></a>



</div>

<p align="center">

<div align="center">

[å®˜æ–¹ç½‘ç«™](https://www.finclip.com/) | [ç¤ºä¾‹å°ç¨‹åº](https://www.finclip.com/#/market) | [å¼€å‘æ–‡æ¡£](https://www.finclip.com/mop/document/) | [éƒ¨ç½²æŒ‡å—](https://www.finclip.com/mop/document/introduce/quickStart/cloud-server-deployment-guide.html) | [SDK é›†æˆæŒ‡å—](https://www.finclip.com/mop/document/introduce/quickStart/intergration-guide.html) | [API åˆ—è¡¨](https://www.finclip.com/mop/document/develop/api/overview.html) | [ç»„ä»¶åˆ—è¡¨](https://www.finclip.com/mop/document/develop/component/overview.html) | [éšç§æ‰¿è¯º](https://www.finclip.com/mop/document/operate/safety.html)

</div>

-----
## ğŸ¤” FinClip æ˜¯ä»€ä¹ˆ?

æœ‰æ²¡æœ‰**æƒ³è¿‡**ï¼Œå¼€å‘å¥½çš„å¾®ä¿¡å°ç¨‹åºèƒ½æ”¾åœ¨è‡ªå·±çš„ APP é‡Œç›´æ¥è¿è¡Œï¼Œåªéœ€è¦å¼€å‘ä¸€æ¬¡å°ç¨‹åºï¼Œå°±èƒ½åœ¨ä¸åŒçš„åº”ç”¨ä¸­æ‰“å¼€å®ƒï¼Œæ˜¯ä¸æ˜¯å¾ˆä¸å¯æ€è®®ï¼Ÿ

æœ‰æ²¡æœ‰**è¯•è¿‡**ï¼Œåœ¨è‡ªå·±çš„ APP ä¸­å¼•å…¥ä¸€ä¸ª SDK ï¼Œåº”ç”¨ä¸­ä¸ä»…å¯ä»¥æ‰“å¼€å°ç¨‹åºï¼Œè¿˜èƒ½è‡ªå®šä¹‰å°ç¨‹åºæ¥å£ï¼Œä¿®æ”¹å°ç¨‹åºæ ·å¼ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—æ›´ä¸å¯æ€è®®ï¼Ÿ

è¿™å°±æ˜¯ FinClip ï¼Œå°±æ˜¯æœ‰è¿™ä¹ˆå¤šä¸å¯æ€è®®ï¼

### 1.1 å¾®ä¿¡æ‰©å±•SDK
å¾®ä¿¡SDKçš„å¿«æ·æ¥å…¥ï¼Œæä¾›è°ƒèµ·å¾®ä¿¡é€šè¿‡å¾®ä¿¡å°ç¨‹åºè·å¾—ç™»å½•ã€ç”¨æˆ·ä¿¡æ¯ã€æ‰‹æœºå·ã€æ”¯ä»˜çš„èƒ½åŠ›ã€‚
å¿«æ·é›†æˆæ–¹å¼ï¼š
```objectivec
pod 'FinAppletWXExt'
```
::: tip æ³¨æ„
åœ¨ä½¿ç”¨`FinAppletWXExt`æ—¶ï¼Œéœ€è¦æŒ‰ç…§ [å¾®ä¿¡æ¥å…¥æŒ‡å—-iOS æ¥å…¥æŒ‡å—](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=1417694084&token=&lang=zh_CN) è¿›è¡Œé…ç½®ï¼Œå…·ä½“æœ‰å¦‚ä¸‹å†…å®¹ï¼š

1. é…ç½®åº”ç”¨çš„`Universal Links`ï¼›
2. æ‰“å¼€`Associated Domains`å¼€å…³ï¼Œå°†`Universal Links`åŸŸååŠ åˆ°é…ç½®ä¸Šï¼›
3. åœ¨å·¥ç¨‹çš„Target -> ã€Infoã€‘ -> ã€URL Typesã€‘ï¼Œæ–°å¢ä¸€ä¸ª`URL Schemes`ï¼ˆkeyä¸ºweixinï¼Œvalueä¸ºwx+åœ¨å¾®ä¿¡ç”³è¯·çš„Appidï¼‰ï¼›
4. åœ¨å·¥ç¨‹`info.plist`ä¸­å¢åŠ åº”ç”¨è®¿é—®ç™½åå•`LSApplicationQueriesSchemes`ï¼Œå¯¹åº”çš„è¦å¡«å†™çš„å€¼ä¸º`wechat`ï¼Œ`weixin`ï¼Œ`weixinULAPI`ã€‚è®°å¾—åœ¨è‹¹æœå¼€å‘è€…ä¸­å¿ƒ`App ID Configuration`å¤„å‹¾é€‰`Associated Domains`ã€‚
:::

è¿›è¡Œåˆå§‹åŒ–æ³¨å†Œç»„ä»¶ï¼š
```objectivec
// å¾®ä¿¡æ‰©å±•SDLåˆå§‹åŒ–
[FATWXExtComponent registerComponent:@"å¾®ä¿¡appid" universalLink:@"universalLink"];
```

å¹¶åœ¨`AppDelegate.m`ä¸­å¢åŠ ä¸‹é¢çš„ä»£ç ã€‚

```objectivec


- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary<UIApplicationOpenURLOptionsKey,id> *)options {
    /*  å¾®ä¿¡ç™»å½•å’Œåˆ†äº«    */
    if ([WXApi handleOpenURL:url delegate:[FATWXApiManager sharedManager]]) {
        return YES;
    }
    return YES;
}

// iOS 9.0 ä¹‹å‰
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation{
    /*  å¾®ä¿¡ç™»å½•å’Œåˆ†äº«    */
    // `WeChatHandleURLDelegate ` ä¸º `WXApiDelegate`ä»£ç†æ–‡ä»¶
    if ([WXApi handleOpenURL:url delegate:[FATWXApiManager sharedManager]]) {
        return YES;
    }
    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{
    /*  å¾®ä¿¡ç™»å½•å’Œåˆ†äº«    */
    if ([WXApi handleOpenURL:url delegate:[FATWXApiManager sharedManager]]) {
        return YES;
    }
    return YES;
}

- (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:(void (^)(NSArray<id<UIUserActivityRestoring>> * _Nullable))restorationHandler {
  return [WXApi handleOpenUniversalLink:userActivity delegate:[FATWXApiManager sharedManager]];
}
```
::: tip æ³¨æ„
ä½¿ç”¨å¾®ä¿¡æ‰©å±•SDKå¿…é¡»ä¿è¯æ ¸å¿ƒSDKç‰ˆæœ¬åœ¨`2.37.13`æˆ–ä»¥ä¸Šã€‚
:::

::: tip æ³¨æ„
ç”±äºFinAppletWXExtéœ€è¦è¦†ç›–buttonOpenTypeDelegateï¼ˆ2.37.13å‰çš„ç‰ˆæœ¬ä¸ºFATAppletDelegateï¼‰ä¸­çš„open-typeç›¸å…³çš„æ–¹æ³•ï¼Œå…·ä½“ä¸ºchooseAvatarã€contactã€feedbackã€getPhoneNumberã€launchAppã€shareAppMessageå…­ä¸ªæ–¹æ³•ã€‚
å› æ­¤è‹¥æ‚¨å®ç°äº†buttonOpenTypeDelegateå¹¶å®ç°äº†ä»¥ä¸Šå…­ä¸ªæ–¹æ³•ï¼ŒFinAppletWXExtå°†ä¼šæ¥ç®¡getPhoneNumberï¼Œå‰©ä½™çš„äº”ä¸ªæ–¹æ³•è¯·æŒ‰ä»¥ä¸‹æ–¹å¼è¿ç§»ï¼Œè‹¥æ‚¨æœªå®ç°buttonOpenTypeDelegateæˆ–æ²¡æœ‰ç”¨åˆ°ä»¥ä¸Šå…­ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¿½ç•¥æ­¤å¤„,è‹¥æ˜¯æ—¢éœ€è¦é›†æˆFinAppletWXExtåˆéœ€è¦å®ç°open-typeç›¸å…³çš„æ–¹æ³•ï¼Œåˆ™å‚è€ƒä¸‹è¾¹çš„è¯´æ˜ã€‚
1.åœ¨æ ¸å¿ƒSDKå’Œå¾®ä¿¡æ‰©å±•SDKåˆå§‹åŒ–æˆåŠŸåï¼Œè®¾ç½®æ‚¨çš„ä»£ç†æ–¹æ³•å®ç°ç±»
```
[FATDelegateClientHelper sharedHelper].buttonOpenTypeDelegate = [FINWXButtonDelegate sharedHelper];
```
2.å®ç°buttonOpenTypeDelegateçš„ä»£ç†æ–¹æ³•
```
- (BOOL)forwardAppletWithInfo:(NSDictionary *)contentInfo completion:(void (^)(FATExtensionCode code, NSDictionary *result))completion {
    return YES;
}

- (BOOL)getUserInfoWithAppletInfo:(FATAppletInfo *)appletInfo bindGetUserInfo:(void (^)(NSDictionary *result))bindGetUserInfo {
    return YES;
}

- (BOOL)contactWithAppletInfo:(FATAppletInfo *)appletInfo sessionFrom:(NSString *)sessionFrom sendMessageTitle:(NSString *)sendMessageTitle sendMessagePath:(NSString *)sendMessagePath sendMessageImg:(NSString *)sendMessageImg showMessageCard:(BOOL)showMessageCard {
    return YES;
}

- (BOOL)getPhoneNumberWithAppletInfo:(FATAppletInfo *)appletInfo bindGetPhoneNumber:(void (^)(NSDictionary *result))bindGetPhoneNumber {
    NSLog(@"å°ç¨‹åºä¿¡æ¯:%@", appletInfo);
    return YES;
}

- (BOOL)launchAppWithAppletInfo:(FATAppletInfo *)appletInfo appParameter:(NSString *)appParameter bindError:(void (^)(NSDictionary *result))bindError bindLaunchApp:(void (^)(NSDictionary *result))bindLaunchApp {
    return YES;
}

- (BOOL)feedbackWithAppletInfo:(FATAppletInfo *)appletInfo {
    return YES;
}

- (BOOL)chooseAvatarWithAppletInfo:(FATAppletInfo *)appletInfo bindChooseAvatar:(void (^)(NSDictionary *result))bindChooseAvatar {
    return YES;
}
```
:::

